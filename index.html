<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>D3</title>
    <style></style>
  </head>
  <body>
    <script src="d3.v6.min.js"></script>
    <script>
      // v6 참조
      // https://github.com/sgratzl/d3tutorial/blob/main/README.md
      // https://observablehq.com/@d3/d3v6-migration-guide
      d3.csv('data/cities.csv')
        .then(data => {
          console.log(
            'domain: ',
            d3.extent(data, el => +el.population),
          );
        })
        .catch(console.error);

      d3.json('data/tweets.json')
        .then(data => {
          const nestedTweets = d3.group(data.tweets, el => el.user);
          console.log(nestedTweets);
        })
        .catch(console.error);

      const newRamp = d3
        .scaleLinear()
        .domain([500000, 13000000])
        .range(['dodgerblue', 'crimson']);
      console.log(d3.color(newRamp(1000000)).formatHex());
      console.log(d3.color(newRamp(9000000)).formatHex());
      // console.log(newRamp.invert(313));

      const sample = [423, 124, 66, 424, 58, 10, 900, 44, 1];
      const qScale = d3.scaleQuantile().domain(sample).range([0, 1, 2]);
      console.log(qScale(423));
      console.log(qScale(10));
      console.log(qScale(66));
      console.log(qScale(100000));
    </script>
  </body>
</html>
